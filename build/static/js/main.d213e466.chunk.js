(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{259:function(t,e,a){t.exports=a(488)},266:function(t,e,a){},488:function(t,e,a){"use strict";a.r(e);var n=a(1),o=a.n(n),r=a(16),c=a.n(r),s=(a(264),a(266),a(146)),i=a(55),l=a(56),u=a(59),d=a(57),h=a(61),p=a(504),f=a(501),m=a(502),k=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(d.a)(e).call(this,t))).setTicker=function(t){t.target.value=t.target.value.toUpperCase(),a.setState({ticker:t.target.value})},a.setAmount=function(t){""!==a.state.amount||0!==parseInt(t.target.value)?a.setState({amount:t.target.value}):t.target.value=""},a.addStock=function(){""!==a.state.ticker&&""!==a.state.amount?a.state.ticker.length<3||a.state.ticker.length>4?p.a.info("Please input a 3 or 4 letter stock ticker"):(a.props.onAdd(a.state.ticker.toUpperCase(),parseInt(a.state.amount)),a.props.onClose(),a.setState({ticker:"",amount:""})):p.a.info("Please input the ticker and amount")},a.onKeyPress=function(t){/^\d*$/.test(t.key)||t.preventDefault()},a.inputIsValid=function(){if(""===a.state.ticker||""===a.state.amount)return p.a.info("Please input the ticker and amount"),!1},a.state={ticker:"",amount:""},a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return this.props.show?o.a.createElement("div",null,o.a.createElement(f.a,{title:"Add Stock",visible:this.props.show,onOk:this.addStock,okText:"Add",onCancel:this.props.onClose,cancelText:"Cancel"},o.a.createElement(m.a,{className:"add-modal-input",placeholder:"Enter stock symbol",onInput:function(e){return t.setTicker(e)},autoFocus:!0}),o.a.createElement(m.a,{className:"add-modal-input",placeholder:"Enter amount",onInput:function(e){return t.setAmount(e)},onKeyPress:function(e){return t.onKeyPress(e)},type:"number",min:"1"}))):null}}]),e}(n.Component),v=a(497),E=[{title:"Stock",dataIndex:"stock",width:100},{title:"Quantity",dataIndex:"quantity",width:100},{title:"Value",dataIndex:"individualValue",width:150},{title:"Total Value",dataIndex:"totalValue"}],g=function(t){function e(){var t,a;Object(i.a)(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(o)))).createDataObject=function(t,e,a){return t.map(function(t,n){return{stock:t.ticker,quantity:t.amount,individualValue:(t.closeValue*e).toFixed(2)+a,totalValue:(t.value*e).toFixed(2)+a,key:n}})},a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.createDataObject(this.props.stocks,this.props.exchangeRate,this.props.currency);return o.a.createElement("div",{id:"table-container"},o.a.createElement(v.a,{rowSelection:{onChange:function(e){t.props.handleChecked(e)},selectedRowKeys:this.props.selectedRowKeys},columns:E,dataSource:e,size:"small",scroll:{y:150},pagination:!1,defaultExpandAllRows:!0}))}}]),e}(n.Component),y=a(494),S=a(500),w=a(490),b=a(495),D=a(480),O=a(481),C=a(489),x=a(234),j=a(498),R=a(491),A=a(25),M=a.n(A),P=j.a.RangePicker,Y="DD/MM/YYYY",I=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(d.a)(e).call(this,t))).generateChartDataList=function(t,e,n){for(var o=t[0].history.length,r=t.length,c=a.props.exchangeRate,s=[],i=0;i<o;i++){var l=t[0].history[i].date;if(a.isDateInRange(l,e,n)){for(var u={date:t[0].history[i].date},d=0;d<r;d++)u[t[d].ticker]=(t[d].history[i].value*c).toFixed(2);s.push(u)}}return s},a.generateChartDataKeys=function(t){return t.map(function(t){return{ticker:t.ticker,color:t.color}})},a.handleOk=function(t){var e=M()(a.props.startAndEndDates[0],Y),n=M()(a.props.startAndEndDates[1],Y);(t[1]<e||t[0]>n)&&p.a.info("No historical data found between ".concat(t[0].format("DD/MM/YYYY")," and ").concat(t[1].format("DD/MM/YYYY"))),a.setState({startDate:a.createEuropeanDateString(t[0].toDate()),endDate:a.createEuropeanDateString(t[1].toDate())})},a.createEuropeanDateString=function(t){return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},a.createDateObject=function(t){var e=t.split("/");return new Date(e[2],e[1]-1,e[0])},a.isDateInRange=function(t,e,n){var o=a.createDateObject(t),r=a.createDateObject(e),c=a.createDateObject(n);return o>=r&&o<=c},a.state={startDate:"",endDate:""},a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;if(!this.props.show)return null;var e,a;this.props.stocks[0].history.length;""===this.state.startDate&&""===this.state.endDate?(e=this.props.startAndEndDates[0],a=this.props.startAndEndDates[1]):(e=this.state.startDate,a=this.state.endDate);var n=this.generateChartDataList(this.props.stocks,e,a),r=this.generateChartDataKeys(this.props.stocks);return o.a.createElement("div",null,o.a.createElement(f.a,{title:"Performance Graph",visible:this.props.show,onOk:this.props.onClose,onCancel:this.props.onClose,width:"80%",footer:null},o.a.createElement(y.a,{width:"100%",height:600},o.a.createElement(S.a,{data:n},r.map(function(e,a){return o.a.createElement(w.a,{type:"monotone",dataKey:e.ticker,key:a,dot:!1,unit:t.props.currency,stroke:e.color})}),o.a.createElement(b.a,{stroke:"#ccc"}),o.a.createElement(D.a,{dataKey:"date"}),o.a.createElement(O.a,null),o.a.createElement(C.a,null),o.a.createElement(x.a,null))),o.a.createElement(R.a,{id:"date-picker-container",type:"flex",justify:"center"},o.a.createElement(P,{defaultValue:[M()(e,Y),M()(a,Y)],format:Y,showTime:{hideDisabledOptions:!0},onOk:this.handleOk,ranges:{"Whole History":[M()(this.props.startAndEndDates[0],Y),M()(this.props.startAndEndDates[1],Y)],"This Month":[M()().startOf("month"),M()().endOf("month")]}}))))}}]),e}(n.Component),V=a(499),T=a(496),G=a(60),N=a(233),F=a(143),K=a.n(F),H=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(d.a)(e).call(this,t))).addStock=function(t,e){console.log("ticker: ".concat(t,"   amount: ").concat(e));var n="https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=".concat(t,"&apikey=").concat("CH6O6Y963H07848Q");fetch(n).then(function(n){return n.json().then(function(n){if("Error Message"in n)p.a.error("Ticker ".concat(t," could not be found. Please give a valid ticker name."));else{var o=n["Time Series (Daily)"],r=parseFloat(o[Object.keys(o)[0]]["4. close"]),c=[];for(var s in o){var i=parseFloat(o[s]["4. close"]);c.push({date:a.createEuropeanDate(s),value:i})}a.updateStocks(t,e,r,c)}}).catch(function(t){console.log(t)})})},a.createEuropeanDate=function(t){var e=new Date(t);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},a.updateStocks=function(t,e,n,o){var r=a.state.stocks,c=!1;r.forEach(function(s,i){s.ticker===t&&(c=!0,r[i].closeValue=n,r[i].amount+=e,r[i].value=r[i].amount*n,r[i].history=o.reverse(),a.setState(function(){return{stocks:r}}))}),c||a.setState(function(r){return{stocks:[].concat(Object(s.a)(r.stocks),[{ticker:t,closeValue:n,amount:e,value:e*n,history:o.reverse(),checked:!1,color:a.generateRandomHexadecimalColor()}])}});var i=a.calcNewPortfolioValue(a.state.stocks);a.setState({value:i})},a.calcNewPortfolioValue=function(t){var e=0;return t.forEach(function(t){e+=t.value}),e},a.showAddStockModal=function(){a.setState({showAddStockModal:!a.state.showAddStockModal})},a.showPerfGraphModal=function(){a.setState({showPerfGraphModal:!a.state.showPerfGraphModal})},a.handleCheckedStocks=function(t){var e=a.state.stocks;e.forEach(function(a,n){t.includes(n)?e[n].checked=!0:e[n].checked=!1}),a.setState({stocks:e})},a.anyStocksChecked=function(){for(var t=0;t<a.state.stocks.length;t++)if(!0===a.state.stocks[t].checked)return!0;return!1},a.getSelectedRows=function(){var t=[];return a.state.stocks.forEach(function(e,a){!0===e.checked&&t.push(a)}),t},a.deleteStocks=function(){var t=a.state.stocks.filter(function(t){return!t.checked}),e=a.calcNewPortfolioValue(t);a.setState({stocks:t,value:e})},a.handleCurrencyChange=function(t){var e,n;"$"===t.target.value?(e=1,n="$"):"\u20ac"===t.target.value&&(e=a.props.euroExchangeRate,n="\u20ac"),a.setState({currentExchangeRate:e,currency:n})},a.getStartAndEndHistoryDates=function(){if(a.state.stocks.length>=1){var t=a.state.stocks[0].history.length;return[a.state.stocks[0].history[0].date,a.state.stocks[0].history[t-1].date]}return null},a.generateRandomHexadecimalColor=function(){return"#"+Math.random().toString(16).slice(2,8)},a.state={value:0,stocks:[],currentExchangeRate:1,currency:"$",showAddStockModal:!1,showPerfGraphModal:!1},a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"portfolio"},o.a.createElement(K.a,{parent:this,prefix:this.props.id,blacklist:["showAddStockModal","showPerfGraphModal"]}),o.a.createElement(V.a,{className:"portfolio",title:this.props.name,style:{width:"100%"},extra:o.a.createElement(T.a,{title:"Are you sure you want to delete the portfolio?",okText:"Yes",cancelText:"No",onConfirm:function(){t.props.onRemove(t.props.id)}},o.a.createElement(G.a,{icon:"close-circle",type:"danger",id:"remove-portfolio-btn"}))},o.a.createElement(k,{show:this.state.showAddStockModal,onClose:this.showAddStockModal,onAdd:this.addStock}),o.a.createElement(I,{stocks:this.state.stocks.filter(function(t){return!0===t.checked}),show:this.state.showPerfGraphModal,onClose:this.showPerfGraphModal,exchangeRate:this.state.currentExchangeRate,currency:this.state.currency,startAndEndDates:this.getStartAndEndHistoryDates()}),o.a.createElement(N.a.Group,{id:"currency-selector",value:this.state.currency,onChange:this.handleCurrencyChange},o.a.createElement(N.a,{value:"$"},"USD"),o.a.createElement(N.a,{value:"\u20ac"},"EUR")),o.a.createElement(g,{exchangeRate:this.state.currentExchangeRate,currency:this.state.currency,stocks:this.state.stocks,handleChecked:this.handleCheckedStocks,selectedRowKeys:this.getSelectedRows()}),o.a.createElement("h3",null,"Portfolio value: "+(this.state.value*this.state.currentExchangeRate).toFixed(2)+this.state.currency),o.a.createElement("div",{id:"buttons-container"},o.a.createElement(G.a,{id:"add-stock-btn",onClick:this.showAddStockModal},"Add Stock"),o.a.createElement(G.a,{id:"perf-graph-btn",onClick:this.showPerfGraphModal,disabled:!this.anyStocksChecked()},"Graph Of Selected"),o.a.createElement(G.a,{id:"delete-selected-btn",onClick:this.deleteStocks,disabled:!this.anyStocksChecked()},"Remove Selected"))))}}]),e}(n.Component),U=a(492),$=a(256),q=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(d.a)(e).call(this,t))).createNewPortfolio=function(){if(10!==a.state.portfolios.length){for(var t="";""===t;)t=prompt("Please enter the name of the portfolio");if(null!==t){var e={name:t,id:Object($.v4)()},n=!1;a.state.portfolios.forEach(function(e){e.name===t&&(alert("A portfolio with the same name already exists. Please give another name."),n=!0)}),n||a.setState(function(t){return{portfolios:[].concat(Object(s.a)(t.portfolios),[e])}})}}else alert("You can't create more than 10 portfolios")},a.removePortfolio=function(t){var e=a.state.portfolios.filter(function(e){return t!==e.id});a.setState({portfolios:e})},a.getCurrencyExchangeRates=function(){fetch("https://api.exchangeratesapi.io/latest?symbols=USD").then(function(t){return t.json()}).then(function(t){a.setState({euroExchangeRate:1/parseFloat(t.rates.USD)})})},a.state={portfolios:[],euroExchangeRate:null},a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.getCurrencyExchangeRates()}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{id:"portfolio-container"},o.a.createElement(K.a,{parent:this}),o.a.createElement(G.a,{id:"add-portfolio-button",type:"primary",onClick:this.createNewPortfolio},"Add new portfolio"),o.a.createElement("div",null,o.a.createElement(R.a,{gutter:{xs:8,sm:16,md:24,lg:32,xl:40},type:"flex",justify:"center",align:"middle"},this.state.portfolios.map(function(e){return o.a.createElement(U.a,{key:e.id,xs:24,sm:24,md:24,lg:12,xl:10},o.a.createElement(H,{name:e.name,onRemove:t.removePortfolio,id:e.id,euroExchangeRate:t.state.euroExchangeRate}))}))))}}]),e}(o.a.Component),L=a(503),J=L.a.Header,Q=L.a.Content,_=function(){return o.a.createElement("div",null,o.a.createElement(L.a,{id:"layout"},o.a.createElement(J,{id:"main-header"},o.a.createElement("h1",{id:"main-header-text"},"SPMS")),o.a.createElement(Q,{id:"main-content"},o.a.createElement(q,null))))};c.a.render(o.a.createElement(_,null),document.getElementById("root"))}},[[259,2,1]]]);
//# sourceMappingURL=main.d213e466.chunk.js.map